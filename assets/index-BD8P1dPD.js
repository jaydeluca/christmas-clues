(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const f of s.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function e(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=e(o);fetch(o.href,s)}})();const y={A:"ðŸŽ",B:"ðŸŒ",C:"ðŸ’",D:"ðŸ¥¥",E:"ðŸ‡",F:"ðŸ“",G:"ðŸ¥",H:"ðŸ‹",I:"ðŸŠ",J:"ðŸ‘",K:"ðŸ",L:"ðŸ¥­",M:"ðŸˆ",N:"ðŸ‰",O:"ðŸ",P:"ðŸ",Q:"ðŸŒ¶ï¸",R:"ðŸ¥•",S:"ðŸŒ½",T:"ðŸ¥¦",U:"ðŸ¥‘",V:"ðŸ†",W:"ðŸ„",X:"ðŸŒ°",Y:"ðŸ¥œ",Z:"ðŸ¥”"},I={Lilly:`Your hunt is almost at the end,
One last place to go, my friend.
In the garage where cars stay tight,
Near something cold and frosty white.`,Elsie:`Iâ€™m part of the house but not in sight,
Iâ€™m cooler than warm and darker than bright.
Below the floors, under it all,
Thatâ€™s where the last surprises call.`},C=document.getElementById("landing-page"),E=document.getElementById("puzzle-page"),w=document.getElementById("solution-page"),d=document.getElementById("feedback-message"),T=document.getElementById("confetti-container"),B=document.getElementById("player-lilly"),b=document.getElementById("player-elsie"),z=document.getElementById("puzzle-avatar"),M=document.getElementById("puzzle-player-name"),g=document.getElementById("cipher-key"),x=document.getElementById("full-encrypted-riddle"),k=document.getElementById("current-encrypted-word"),W=document.getElementById("guess-form"),c=document.getElementById("player-guess"),h=document.getElementById("solution-so-far"),A=document.getElementById("final-riddle"),a=new(window.AudioContext||window.webkitAudioContext),O={Lilly:{name:"LillyBean",avatar:"lilly.png"},Elsie:{name:"Elsie & Evie",avatar:"elsie.png"}};let i=[],p=[],m=new Set,l=0;const u=n=>n.replace(/[^\w]/g,"").toLowerCase();function P(n){return n.toUpperCase().split("").map(t=>y[t]||t).join("")}function S(){const n=a.currentTime,t=a.createGain();t.gain.setValueAtTime(.15,n),t.connect(a.destination);function e(r,o){const s=a.createOscillator();s.type="triangle",s.frequency.setValueAtTime(r,o),s.connect(t),s.start(o),s.stop(o+.25)}e(880,n),e(1175,n+.2)}function N(){const n=a.currentTime,t=a.createGain();t.gain.setValueAtTime(.2,n),t.connect(a.destination);const e=a.createOscillator();e.type="sawtooth",e.frequency.setValueAtTime(120,n),e.frequency.exponentialRampToValueAtTime(60,n+.3),e.connect(t),e.start(n),e.stop(n+.3)}function R(){const n=["#ffc107","#28a745","#007bff","#dc3545","#17a2b8"];for(let t=0;t<100;t++){const e=document.createElement("div");e.classList.add("confetti"),e.style.backgroundColor=n[Math.floor(Math.random()*n.length)],e.style.left=`${Math.random()*100}%`,e.style.top=`${-20+Math.random()*40}%`,e.style.transform=`rotate(${Math.random()*360}deg)`,e.style.animation=`fall ${1+Math.random()*2}s ${Math.random()*2}s linear forwards`,T.appendChild(e),setTimeout(()=>{e.remove()},4e3)}}function $(){g.innerHTML="";for(const n in y){const t=document.createElement("div");t.innerHTML=`<strong>${n}</strong>: ${y[n]}`,g.appendChild(t)}}function v(n=null){h.innerHTML="",i.forEach(t=>{const e=document.createElement("span"),r=u(t);m.has(r)?(e.textContent=t+" ",e.classList.add("solved"),n&&r===n&&(e.classList.add("sparkle"),e.onanimationend=()=>e.classList.remove("sparkle"))):e.textContent="_".repeat(r.length)+" ",h.appendChild(e)}),l<p.length&&(k.innerText=p[l])}function V(){i.every(t=>{const e=u(t);return!e||m.has(e)})&&(A.innerText=i.join(" "),E.classList.add("hidden"),w.classList.remove("hidden"))}function F(n,t){d.textContent=n,d.className="feedback-message",d.classList.add("incorrect"),d.classList.add("visible"),setTimeout(()=>{d.classList.remove("visible")},1500)}function L(n){const t=I[n],e=O[n];if(!t||t==="TBD"){alert("This player's riddle is not available yet!");return}z.src=e.avatar,M.innerText=e.name,l=0,m=new Set,i=t.split(" "),p=P(t).split(" "),x.innerText=p.join(" "),c.value="",$(),v(),C.classList.add("hidden"),E.classList.remove("hidden")}B.addEventListener("click",()=>L("Lilly"));b.addEventListener("click",()=>L("Elsie"));W.addEventListener("submit",n=>{n.preventDefault();const t=c.value.trim();if(!t)return;const e=i[l],r=u(e);if(u(t)===r){for(m.add(r),S(),R();l<i.length&&m.has(u(i[l]));)l++;c.value="",v(r),V()}else N(),F("Nope!"),c.classList.add("shake"),c.onanimationend=()=>c.classList.remove("shake")});
